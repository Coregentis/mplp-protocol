#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Validate commit message format using commitlint
echo "📝 Validating commit message..."
npx --no-install commitlint --edit "$1" || {
  echo ""
  echo "❌ Commit message does not follow conventional format!"
  echo ""
  echo "📋 Expected format: <type>[optional scope]: <description>"
  echo ""
  echo "Examples:"
  echo "  feat(schema): add new validation rules"
  echo "  fix(api): resolve authentication issue"
  echo "  docs(readme): update installation guide"
  echo "  test(unit): add tests for core functions"
  echo ""
  echo "🔗 See: https://www.conventionalcommits.org/"
  echo ""
  exit 1
}

echo "✅ Commit message format is valid!"